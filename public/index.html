// Ensure the user is signed in before performing Firestore writes
async function ensureSignedIn() {
    const user = firebase.auth().currentUser;
    if (!user) {
        await firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider());
    }
}

// Example Firestore write function
async function writeData() {
    await ensureSignedIn();
    // Your existing write logic here
    await firestore.collection('data').doc('example').set({ key: 'value' });
}

// Another example Firestore update function
async function updateData() {
    await ensureSignedIn();
    // Your existing update logic here
    await firestore.collection('data').doc('example').update({ key: 'newValue' });
}

// Existing functions that do not perform writes will remain unchanged
function readData() {
    // Your existing read logic here
}

// Other functions...
